<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{{title}}</title>
    <style>
    table, th, td {
        border: 1px solid black;
        width : 100%
    }
    * {
      box-sizing: border-box;
    }
    </style>
</head>
<body>
    Overall loss: {{loss}} <br />
    <input type="range" min="0" max="1" value="0.5" step=0.1 class="slider" id="threshold" />
    <input type="checkbox" id="only_license_plate_cb" onchange="showOnlyLicensePlateExamples()"
           title="Only show examples with license plates" />
    <span id="threshold_text"></span>
    <table id="myTable">
        <tr>
            <td>original label</td>
            <td>Is there license plate on the picture?</td>
            <td>network output confidence</td>
            <td>output</td>
            <td>image</td>
        </tr>
        {% for data in datas %}
            <tr class="table_rows">
                <td>{{data.orig_label}}</td>
                <td>{{data.is_there_license_plate}}</td>
                <td>{{data.network_confidence}}</td>
                <td>{{data.output}}</td>
                <td><img src="{{data.image_loc}}" /></td>
            </tr>
        {% endfor %}
    </table>

    <!--
    <table>
      <tr>
        <td bgcolor="chucknorris" cellpadding="8" width="100" align="center">chuck norris</td>
        <td bgcolor="mrt"         cellpadding="8" width="100" align="center" style="color:#ffffff">Mr T</td>
        <td bgcolor="ninjaturtle" cellpadding="8" width="100" align="center" style="color:#ffffff">ninjaturtle</td>
      </tr>
      <tr>
        <td bgcolor="sick"  cellpadding="8" width="100" align="center">sick</td>
        <td bgcolor="crap"  cellpadding="8" width="100" align="center">crap</td>
        <td bgcolor="grass" cellpadding="8" width="100" align="center">grass</td>
      </tr>
    </table>
    -->
    <script>
    var conf_thd = document.getElementById("threshold");
    conf_thd.oninput = function() {
      // Declare variables
      var input, filter, table, tr, td, i;
      thd = this.value;
      table = document.getElementById("myTable");
      tr = table.getElementsByTagName("tr");

      // Loop through all table rows, and hide those who don't match the search query
      for (i = 0; i < tr.length; i++) {
        td = tr[i].getElementsByTagName("td")[2];
        if (td) {
          if (td.innerHTML > thd) {
            tr[i].style.display = '';
          } else {
            tr[i].style.display = 'none';
          }
        }
      }
      var threshold_text = document.getElementById("threshold_text")
      threshold_text.innerHTML = this.value
    }

    function showOnlyLicensePlateExamples() {
        var cb = document.getElementById("only_license_plate_cb")
        var rows = document.getElementsByClassName("table_rows")
        for (i = 0; i < rows.length; i++) {
            td = rows[i].getElementsByTagName("td")[1]
            if (td) {
                if (td.innerHTML == "1.0" || ! cb.checked) {
                    rows[i].style.display = '';
                } else {
                    rows[i].style.display = 'none';
                }
            }
        }
    }
    </script>
</body>
</html>